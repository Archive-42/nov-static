<!DOCTYPE html><html><head>
      <title>w11-d2_hello-express</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\almyk\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.5.13\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header undefined" id="week-11-day-2brhello-express">WEEK-11 DAY-2<br><em>Hello, Express!</em></h1>

<hr>
<div class="code-chunk" data-id="code-chunk-id-0" data-cmd="toc"><div class="input-div"><div class="btn-group"><div class="run-btn btn"><span>&#x25B6;&#xFE0E;</span></div><div class="run-all-btn btn">all</div></div><div class="status">running...</div></div><div class="output-div"></div></div><ul>
<li><a href="#express-learning-objectives">Express Learning Objectives</a></li>
<li><a href="#pug-template-learning-objectives">Pug Template Learning Objectives</a></li>
<li><a href="#moving-into-the-express-lane">Moving Into the Express Lane</a>
<ul>
<li><a href="#installing-express">Installing Express</a></li>
<li><a href="#creating-an-express-application">Creating an Express application</a></li>
<li><a href="#handling-requests">Handling requests</a></li>
<li><a href="#listening-for-http-connections">Listening for HTTP connections</a></li>
<li><a href="#testing-your-application">Testing your application</a></li>
<li><a href="#what-you-learned">What you learned</a></li>
<li><a href="#see-also">See also&#x2026;</a></li>
</ul>
</li>
<li><a href="#templating-meet-pug">Templating - <em>Meet Pug!</em></a>
<ul>
<li><a href="#what-is-a-template">What is a template?</a></li>
<li><a href="#rendering-a-simple-template">Rendering a simple template</a></li>
<li><a href="#what-you-learned-1">What you learned</a></li>
</ul>
</li>
<li><a href="#digging-into-the-pug-template-syntax">Digging Into the Pug Template Syntax</a>
<ul>
<li><a href="#setting-up-a-sandbox-application">Setting up a sandbox application</a></li>
<li><a href="#rendering-elements">Rendering elements</a></li>
<li><a href="#setting-element-attribute-values">Setting element attribute values</a></li>
<li><a href="#rendering-data">Rendering data</a></li>
<li><a href="#iteration-and-conditionals">Iteration and conditionals</a></li>
<li><a href="#what-you-learned-2">What you learned</a></li>
<li><a href="#see-also-1">See also&#x2026;</a></li>
</ul>
</li>
<li><a href="#exploring-route-paths">Exploring Route Paths</a>
<ul>
<li><a href="#getting-data-from-a-path">Getting data from a path</a></li>
<li><a href="#defining-flexible-route-paths">Defining flexible route paths</a></li>
<li><a href="#redirecting-incorrect-requests">Redirecting &quot;incorrect&quot; requests</a></li>
<li><a href="#what-you-learned-3">What you learned</a></li>
</ul>
</li>
<li><a href="#express-routers">Express Routers</a>
<ul>
<li><a href="#setting-up-the-initial-project">Setting up the initial project</a></li>
<li><a href="#defining-a-collection-of-route-handlers">Defining a collection of route handlers</a></li>
<li><a href="#mounting-a-router-instance">Mounting a Router instance</a></li>
<li><a href="#what-you-learned-4">What you learned</a></li>
<li><a href="#see-also-2">See also&#x2026;</a></li>
</ul>
</li>
<li><a href="#routing-roundup-project">Routing Roundup Project</a>
<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#phase-1-defining-the-default-route">Phase 1: Defining the default route</a></li>
<li><a href="#phase-2-using-a-template-to-render-html">Phase 2: Using a template to render HTML</a></li>
<li><a href="#phase-3-defining-another-flexible-route">Phase 3: Defining another flexible route</a></li>
<li><a href="#phase-4-capturing-a-value-from-the-url-path">Phase 4: Capturing a value from the URL path</a></li>
<li><a href="#phase-5-defining-a-collection-of-route-handlers">Phase 5: Defining a collection of route handlers</a></li>
<li><a href="#what-weve-learned">What We&apos;ve Learned</a></li>
</ul>
</li>
</ul>
<hr>
<hr>
<h1 class="mume-header" id="express-learning-objectives">Express Learning Objectives</h1>

<p>Express is the <em>de facto</em> standard for building HTTP applications with Node.js.<br>
When you complete this lesson, you should be able to</p>
<ul>
<li>Send plain text responses for any HTTP request</li>
<li>Use pattern matching to match HTTP request paths to route handlers</li>
<li>Use the Pug template engine to generate HTML from Pug templates to send to the<br>
browser</li>
<li>Pass data to Pug templates to generate dynamic content</li>
<li>Use the <code>Router</code> class to modularize the definition of routes</li>
</ul>
<hr>
<h1 class="mume-header" id="pug-template-learning-objectives">Pug Template Learning Objectives</h1>

<p>Using Pug.js helps reduce the overall creation and maintenance of source code<br>
for HTML generation. It is one of many template engines supported by Express.js<br>
and remains one of the most popular. At the end of this lesson, you will be able<br>
to effectively use Pug.js to</p>
<ul>
<li>Declare HTML tags and their associated ids, classes, attributes, and content</li>
<li>Use conditional statements to determine whether or not to render a block</li>
<li>Use interpolation to mix static text and dynamic values in content and<br>
attributes</li>
<li>Use iteration to generate multiple blocks of HTML based on data provided to<br>
the template</li>
</ul>
<hr>
<h1 class="mume-header" id="moving-into-the-express-lane">Moving Into the Express Lane</h1>

<p>In an earlier lesson, you created a simple HTTP server using JavaScript and<br>
Node.js. That HTTP server, or web application, returned a simple response based<br>
upon the incoming request&apos;s URL (and HTTP method in one case). For example, a<br>
request to the URL <code>http://localhost:300/OK</code> returned a <code>200 OK</code> HTTP response<br>
status code.</p>
<p>Overall, this was easy to do using Node&apos;s native APIs, though the requirements<br>
were relatively straightforward. Using Node to create a web application with<br>
features commonly found in websites unfortunately requires a fair amount of<br>
boilerplate code (i.e. verbose, repetitive code). This can slow down and<br>
distract developers from working on more important tasks.</p>
<p>Enter Express, a popular Node.js framework for building web applications.<br>
Express aims to make common web development tasks easier to implement by<br>
reducing the amount of boilerplate code you need to write. This allows you to<br>
focus on the things that makes your web application special. At the same time,<br>
Express is, in its own words, unopinionated and minimalistic, giving you the<br>
flexibility to decide what&apos;s best for your situation.</p>
<p>As an introduction to Express, let&apos;s create a simple web application. Your<br>
application will return a plain text response containing &quot;Hello from Express!&quot;<br>
for any request to <code>http://localhost:8081/</code>.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Use the <code>express()</code> function to create an Express application;</li>
<li>Recall that routing is determining how an application responds to a client<br>
request to a specific URI (or path) and HTTP method combination;</li>
<li>Use the Application <code>get()</code> method to define a route that handles <code>GET</code><br>
requests;</li>
<li>Use the Response object <code>res.send()</code> method to send a plain text response to a<br>
client; and</li>
<li>Use the <code>app.listen()</code> method to start a server listening for HTTP connections<br>
on a specific port.</li>
</ul>
<h2 class="mume-header" id="installing-express">Installing Express</h2>

<p>Before you can use Express to create a web application, you need to install it<br>
using npm. Open a terminal or command prompt window, browse to your project&apos;s<br>
folder, and initialize npm by running the following command:</p>
<pre data-role="codeBlock" data-info class="language-"><code>npm init -y
</code></pre><p>You&apos;ll now have <code>package.json</code> and <code>package-lock.json</code> files in the root of your<br>
project. The <code>package.json</code> file keeps track of your application&apos;s<br>
dependencies&#x2014;npm packages that your application needs to successfully start and<br>
run.</p>
<p>Run the following command to install Express 4.0:</p>
<pre data-role="codeBlock" data-info class="language-"><code>npm install express@^4.0.0
</code></pre><p>The <code>package.json</code> file will now list Express as a dependency:</p>
<pre data-role="codeBlock" data-info="json" class="language-json"><span class="token punctuation">{</span>
 <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-project-folder-name&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;express&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.17.1&quot;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>At the time of this writing, the latest version of Express 4.0 is <code>4.17.1</code>.<br>
While newer minor or patch versions of Express 4.0 should work fine, newer<br>
major versions (5.0+) might not work as expected. The caret character (<code>^</code>)<br>
the precedes the version number in the <code>package.json</code> file (<code>^4.17.1</code>)<br>
instructs npm to allow versions greater than <code>4.17.1</code> and less than <code>5.0.0</code>.</p>
</blockquote>
<h3 class="mume-header" id="git-and-the-node_modules-folder">Git and the <code>node_modules</code> folder</h3>

<p>In an earlier lesson, you learned that when using <code>npm install</code> to install an<br>
npm package locally into your project, npm downloads and installs the specified<br>
package to the <code>node_modules</code> folder. Over time, as you install dependencies,<br>
the <code>node_modules</code> folder tends to grow to be very large, containing many<br>
folders and files.</p>
<p>If you&apos;re using Git for source control, it&apos;s important to add a <code>.gitignore</code><br>
file to the root of your project and add the entry <code>node_modules/</code> so that the<br>
<code>node_modules</code> folder won&apos;t be tracked by Git.</p>
<blockquote>
<p>As alternative to creating your own <code>.gitignore</code> file, you can use GitHub&apos;s<br>
comprehensive <a href="https://github.com/github/gitignore/blob/master/Node.gitignore"><code>.gitignore</code> file for Node.js projects</a>.</p>
</blockquote>
<h2 class="mume-header" id="creating-an-express-application">Creating an Express application</h2>

<p>Now you&apos;re ready to create your Express application!</p>
<p>Add a file named <code>app.js</code> to your project folder and open it in your code<br>
editor. Use the <code>require</code> directive to import the <code>express</code> module and assign it<br>
to a variable named <code>express</code>. The <code>express</code> variable references a function<br>
(exported by the <code>express</code> module) that you can call to create an Express<br>
application. Assign the return value from the <code>express</code> function call to a<br>
variable named <code>app</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>The <code>app</code> variable holds a reference to an Express Application (<code>app</code>) object.<br>
You&apos;ll call methods on the <code>app</code> object as you build out your web application.</p>
<h2 class="mume-header" id="handling-requests">Handling requests</h2>

<p>Next, you need to configure the routing for your application.</p>
<p>The process of configuring routing is determining how an application should<br>
respond to a client request to an endpoint&#x2014;a  specific URI (or path) and HTTP<br>
method combination. For example, when a client makes a <code>GET</code> request to your<br>
application by browsing to the URL <code>http://localhost:8081/</code>, it should return<br>
the plain text response &quot;Hello from Express!&quot;.</p>
<blockquote>
<p><strong>Do you remember the parts of a URL?</strong> In the URL <code>http://localhost:8081/</code>,<br>
the protocol is <code>http</code>, the domain is <code>localhost</code>, the port is <code>8081</code> (we&apos;ll<br>
see in a bit how to configure the port for your application), and the path is<br>
<code>/</code>.</p>
</blockquote>
<p>The Express Application (<code>app</code>) object contains a collection of methods for<br>
defining an application&apos;s routes:</p>
<ul>
<li><code>get()</code> - to handle <code>GET</code> requests</li>
<li><code>post()</code> - to handle <code>POST</code> requests</li>
<li><code>put()</code> - to handle <code>PUT</code> requests</li>
<li><code>delete()</code> - to handle <code>DELETE</code> requests</li>
</ul>
<p><code>GET</code> and <code>POST</code> are two of the most commonly used HTTP methods, followed by<br>
<code>PUT</code> and <code>DELETE</code>.</p>
<blockquote>
<p>See the Express documentation for a <a href="https://expressjs.com/en/4x/api.html#routing-methods">complete list of the available routing<br>
methods</a>.</p>
</blockquote>
<p>To define a route to handle <code>GET</code> requests, call the <code>app.get()</code> method passing<br>
in the route path and a route handler function:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO Send a response back to the client.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Express provides a lot of flexibility with the format of the route path. A route<br>
path can be a string, string pattern, regular expression, or an array containing<br>
any combination of those. For now, you&apos;ll just use a string, but in later<br>
articles you&apos;ll see how to use the other options.</p>
<p>The route handler function is called by Express whenever an incoming request<br>
matches the route. The function defines two parameters, <code>req</code> and <code>res</code>, giving<br>
you access respectively to the Request and Response objects. The Request (<code>req</code>)<br>
object is used to get information about the client request that&apos;s currently<br>
being processed. The Response (<code>res</code>) object is used to prepare a response to<br>
return to the client.</p>
<p>To send a plain text response to the client, call the <code>res.send()</code> method<br>
passing in the desired content:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Hello from Express!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Here&apos;s the code for your application so far:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define routes.</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Hello from Express!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h2 class="mume-header" id="listening-for-http-connections">Listening for HTTP connections</h2>

<p>Great job so far! Now you need to start the server listening for HTTP<br>
connections from clients. To do that, call the <code>app.listen()</code> method passing in<br>
the desired port to use and an optional callback function:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>The callback function will be called when the server has started listening for<br>
connections. Logging a message to the console gives you an easy way to see when<br>
the server is ready for testing.</p>
<p>Here&apos;s the complete code for your application:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define routes.</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Hello from Express!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define a port and start listening for connections.</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h2 class="mume-header" id="testing-your-application">Testing your application</h2>

<p>To test your application, open a terminal or command prompt window, browse to<br>
your project&apos;s folder, and run the following command:</p>
<pre data-role="codeBlock" data-info class="language-"><code>node app.js
</code></pre><p>If your application starts successfully, you&apos;ll see the text &quot;Listening on port<br>
8081&#x2026;&quot; displayed in the terminal or command prompt window. Next, open a web<br>
browser and browse to the address <code>http://localhost:8081/</code>. You should see the<br>
text &quot;Hello from Express!&quot; displayed in the browser.</p>
<p>If you see the expected text, congrats! If you don&apos;t, double check the<br>
following:</p>
<ul>
<li>Make sure that you started your application by running the command <code>node app.js</code>.</li>
<li>Double check that the URL you entered into your browser&apos;s address bar is<br>
<code>http://localhost:8081/</code>.</li>
<li>Check the terminal or command prompt window to see if an error is occurring.</li>
</ul>
<h2 class="mume-header" id="what-you-learned">What you learned</h2>

<p>In this article, you learned</p>
<ul>
<li>how to use the <code>express()</code> function to create an Express application;</li>
<li>that routing is determining how an application responds to a client request to<br>
a specific URI (or path) and HTTP method combination;</li>
<li>how to use the Application <code>get()</code> method to define a route that handles <code>GET</code><br>
requests;</li>
<li>how to use the Response object <code>res.send()</code> method to send a plain text<br>
response to a client; and</li>
<li>how to use the <code>app.listen()</code> method to start a server listening for HTTP<br>
connections on a specific port.</li>
</ul>
<h2 class="mume-header" id="see-also">See also&#x2026;</h2>

<p>As you learn about Express, you&apos;ll find it helpful to explore Express&apos; official<br>
documentation at <a href="https://expressjs.com/">expressjs.com</a>.</p>
<hr>
<h1 class="mume-header" id="templating-meet-pug">Templating - <em>Meet Pug!</em></h1>

<p>In a previous article, you learned how to use the Response object&apos;s <code>res.send()</code><br>
method to send a plain text response to the client. Sending plain text is, well,<br>
plain! A much more common content format when sending a response to browser<br>
clients is HTML.</p>
<p>You <strong>could</strong> use the <code>res.send()</code> method to send a string of HTML content to<br>
the client:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
      &lt;head&gt;&lt;title&gt;Welcome&lt;/head&gt;&lt;/title&gt;
      &lt;body&gt;
        &lt;h1&gt;Hello from Express!&lt;/h1&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  `</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>While it works, using this technique is tedious and prone to errors. Can you<br>
spot the error in the above HTML (hint: look at the nesting of the HTML<br>
elements)?</p>
<p>Luckily, there&apos;s a better way. Developers have used templates (files that<br>
contain markup and code) to render HTML content for many years (that&apos;s<br>
practically centuries in internet time!) Express integrates with many popular<br>
templating engines (libraries that provide support for writing templates). In<br>
this article you&apos;ll learn how to use the popular Pug templating engine to<br>
render HTML content.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Create a Pug template that contains one or more variables;</li>
<li>Use the <code>app.set()</code> method and the <code>view engine</code> application setting property<br>
to configure Express to use the Pug template engine; and</li>
<li>Use the Response object <code>res.render()</code> method to render a Pug template to send<br>
an HTML response to a client.</li>
</ul>
<h2 class="mume-header" id="what-is-a-template">What is a template?</h2>

<p>A template allows developers to easily combine static and dynamic content.<br>
Templates are typically written using a special, proprietary syntax to make it<br>
as easy as possible for developers to create content. Here&apos;s an example of a<br>
simple Pug template:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">html</span>
  <span class="token tag">head</span>
    <span class="token tag">title</span> <span class="token plain-text">Welcome</span>
  <span class="token tag">body</span>
    <span class="token tag">h1</span> <span class="token plain-text">Welcome #{username}!</span>
</pre><p>Notice the lack of angle brackets (i.e. <code>&lt;</code> and <code>&gt;</code>) in this example on the<br>
<code>html</code>, <code>head</code>, <code>title</code>, <code>body</code>, and <code>h1</code> elements.</p>
<p>You also don&apos;t have to close elements. Pug will take care of that for you. It<br>
uses indents to determine which elements are children of other elements. In the<br>
above example, <code>head</code> is a child of <code>html</code> because <code>head</code> is indented more than<br>
<code>html</code>. When Pug turns that into HTML, it will place the <code>&lt;head&gt;...&lt;/head&gt;</code><br>
element <em>inside</em> the <code>&lt;html&gt;...&lt;/html&gt;</code> element. Look at all the typing that Pug<br>
has saved you!</p>
<p>Element content is provided just to the right of the element name. The content<br>
for the <code>title</code> element is &quot;Welcome&quot; and the content for the <code>h1</code> element is<br>
&quot;Welcome #{username}!&quot;.</p>
<p>At runtime, the templating engine combines data (often retrieved from a<br>
database) with a template to render the content for the response to return to<br>
the client. In the above template, Pug will replace the text <code>#{username}</code> with<br>
the <code>username</code> variable value that you give it when you tell express to render<br>
that template. Assuming that the <code>username</code> variable is set to the value<br>
<code>mycoolusername</code>, Pug would render the following HTML:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Welcome<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Welcome mycoolusername!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</pre><blockquote>
<p>Pug, by default, removes indentation and all whitespace between elements.<br>
In some rare cases you might need to manually control how whitespace<br>
is handled. For information on how to do this, see the <a href="https://pugjs.org/language/plain-text.html#whitespace-control">official Pug<br>
documentation</a>.</p>
</blockquote>
<h2 class="mume-header" id="rendering-a-simple-template">Rendering a simple template</h2>

<p>Before we further explore Pug&apos;s template syntax, let&apos;s see how to use Express to<br>
render a simple template to send a response to a client.</p>
<h3 class="mume-header" id="setting-up-the-project">Setting up the project</h3>

<p>Create a folder for your project, open a terminal or command prompt window,<br>
browse to your project&apos;s folder, and initialize npm. (You use the <code>-y</code> flag so<br>
that you don&apos;t have to answer those annoying questions. <code>npm</code> will just use<br>
default values for everything.)</p>
<pre data-role="codeBlock" data-info class="language-"><code>npm init -y
</code></pre><p>Then install Express using <code>npm</code>.</p>
<pre data-role="codeBlock" data-info class="language-"><code>npm install express
</code></pre><p>Now you&apos;re ready to create the application. Add a file named <code>app.js</code> to your<br>
project folder. Import the <code>express</code> module and assign it to a variable named<br>
<code>express</code>, then call the <code>express</code> function and assign the return value to a<br>
variable named <code>app</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>In the previous article, you used the <code>app.get()</code> method to define a route for<br>
handling <code>GET</code> requests. As an alternative to the <code>app.get()</code> method, Express<br>
provides a method named <code>all()</code> that can be used to define a route that handles<br>
any HTTP method.</p>
<p>Call the <code>app.all()</code> method, passing in an asterisk (<code>*</code>) for the route path and<br>
a route handler function that calls the <code>res.send()</code> method to send a plain text<br>
response to the client:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Define a route.</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&apos;*&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Hello from the Pug template example app!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Remember that the route handler function is called by Express whenever an<br>
incoming request matches the route. The function defines two parameters, <code>req</code><br>
and <code>res</code>, giving you access respectively to the Request and Response objects.</p>
<p>The asterisk (<code>*</code>) in the route path is a wildcard character that will match any<br>
number of characters in the incoming request&apos;s URL path (e.g. <code>/</code>, <code>/about</code>,<br>
<code>/about/foo</code>, and so on). Combining this route path with the <code>get.all()</code> method<br>
defines a route that will match any incoming request, regardless of its path or<br>
HTTP method.</p>
<blockquote>
<p>This approach is unorthodox and not commonly seen in real world applications.<br>
Generally speaking, you should prefer to use the <code>app</code> methods that map to<br>
individual HTTP methods. We&apos;re using the <code>app.all()</code> in this article to<br>
demonstrate the flexibility that Express provides when defining routes.</p>
</blockquote>
<p>When a route can match any incoming request it can be helpful to know the<br>
current request&apos;s method and path. The Request object passed into the route<br>
handler function via the <code>req</code> parameter provides information about the incoming<br>
request. You can log two Request object properties in particular, <code>req.method</code><br>
and <code>req.path</code>, to the console to see the current request&apos;s method and path:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Define a route.</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&apos;*&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request path: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Hello from the Pug template example app!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><blockquote>
<p>The Express Request and Response objects provide a number of helpful<br>
properties and methods for working with HTTP requests and responses. To learn<br>
more, see the official Express docs for the <a href="https://expressjs.com/en/4x/api.html#req">Request</a> and<br>
<a href="https://expressjs.com/en/4x/api.html#res">Response</a> objects.</p>
</blockquote>
<p>Now start the server listening for HTTP connections by calling the<br>
<code>app.listen()</code> method:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Define a port and start listening for connections.</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Here&apos;s what the code for your application should look like at this point:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define a route.</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&apos;*&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request path: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Hello from the Pug template example app!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define a port and start listening for connections.</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>To test your application, open a terminal, browse to your project&apos;s folder, and<br>
run the command:</p>
<pre data-role="codeBlock" data-info class="language-"><code>node app.js
</code></pre><p>The text &quot;Listening on port 8081&#x2026;&quot; should display in the terminal or command<br>
prompt window. Open a web browser and browse to the address<br>
<code>http://localhost:8081/</code> to confirm that the application sends a response<br>
containing the plain text &quot;Hello from the Pug template example app!&quot;.</p>
<h3 class="mume-header" id="creating-a-template">Creating a template</h3>

<p>Templates are stored in the <code>views</code> folder by default. To create a template, add<br>
a folder named <code>views</code> to your project, then add a file named <code>layout.pug</code><br>
containing the following code:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">html</span>
  <span class="token tag">head</span>
    <span class="token tag">title</span><span class="token punctuation">=</span><span class="token code"> title</span>
  <span class="token tag">body</span>
    <span class="token tag">h1</span><span class="token punctuation">=</span><span class="token code"> heading</span>
</pre><p>The assignment operator (<code>=</code>) following the <code>title</code> and <code>h1</code> element names<br>
instructs Pug to set the content for those elements respectively to the <code>title</code><br>
and <code>heading</code> variables.</p>
<blockquote>
<p>You&apos;ll learn more about how to render data in a Pug template in a later<br>
article.</p>
</blockquote>
<h3 class="mume-header" id="configuring-express-to-use-a-template-engine">Configuring Express to use a template engine</h3>

<p>Before you can use the Pug template engine in an Express application, you need<br>
to install it:</p>
<pre data-role="codeBlock" data-info class="language-"><code>npm install pug@^2.0.0
</code></pre><p>To configure Express to use Pug as its default template engine, call the<br>
<code>app.set()</code> method and set the <code>view engine</code> application setting property to the<br>
value <code>pug</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set the pug view engine.</span>
app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&apos;view engine&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;pug&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><blockquote>
<p>The <code>view engine</code> property is just one of the available application settings.<br>
For a list of available settings see the <a href="https://expressjs.com/en/4x/api.html#app.settings.table">Express documentation</a>.</p>
</blockquote>
<p>Setting the <code>view engine</code> application setting property isn&apos;t required, but it<br>
has the following benefits:</p>
<ol>
<li>It makes it clearer to code reviewers that your application is using the Pug<br>
template engine; and</li>
<li>You don&apos;t have to supply the file extension of the template when rendering a<br>
template (we&apos;ll see how this works next).</li>
</ol>
<h3 class="mume-header" id="rendering-a-template">Rendering a template</h3>

<p>Now you&apos;re ready to update your application to use your template. Update your<br>
route handler function to call the Response object&apos;s <code>res.render()</code> method,<br>
passing in the name of the template:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Define a route.</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&apos;*&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request path: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&apos;layout&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>At this point, if run and test your application, you won&apos;t see any content<br>
displayed in the browser.</p>
<blockquote>
<p>If you left your application running in the terminal or command prompt window,<br>
you&apos;ll need to stop and restart it so that Node picks up your latest code<br>
changes. To do that, press <code>CTRL+C</code> to stop the application and run <code>node app.js</code> to restart the application.</p>
</blockquote>
<p>If you view the source for the page in the browser, you&apos;ll see the following<br>
HTML:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</pre><p>Notice that the <code>title</code> and <code>h1</code> elements don&apos;t have any content. The template<br>
expects data for the <code>title</code> and <code>heading</code> variables, but you&apos;re currently not<br>
passing any data. To fix that, pass an object literal containing <code>title</code> and<br>
<code>heading</code> properties as a second argument to the <code>res.render()</code> method call:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Define a route.</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&apos;*&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request path: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> pageData <span class="token operator">=</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">&apos;Welcome&apos;</span><span class="token punctuation">,</span> heading<span class="token punctuation">:</span> <span class="token string">&apos;Home&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&apos;layout&apos;</span><span class="token punctuation">,</span> pageData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Now if run and test your application, you should see the expected content<br>
displayed in the browser.</p>
<p>Here&apos;s what the code for your application should look like after updating it to<br>
render the Pug template:</p>
<p><strong>app.js</strong></p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set the pug view engine.</span>
app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&apos;view engine&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;pug&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define a route.</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&apos;*&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request path: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> pageData <span class="token operator">=</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">&apos;Welcome&apos;</span><span class="token punctuation">,</span> heading<span class="token punctuation">:</span> <span class="token string">&apos;Home&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&apos;layout&apos;</span><span class="token punctuation">,</span> pageData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define a port and start listening for connections.</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p><strong>views/layout.pug</strong></p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">html</span>
  <span class="token tag">head</span>
    <span class="token tag">title</span><span class="token punctuation">=</span><span class="token code"> title</span>
  <span class="token tag">body</span>
    <span class="token tag">h1</span><span class="token punctuation">=</span><span class="token code"> heading</span>
</pre><h2 class="mume-header" id="what-you-learned-1">What you learned</h2>

<p>In this article, you learned</p>
<ul>
<li>how to create a Pug template that contains one or more variables;</li>
<li>how to use the <code>app.set()</code> method and the <code>view engine</code> application setting<br>
property to configure Express to use the Pug template engine; and</li>
<li>how to use the Response object <code>res.render()</code> method to render a Pug template<br>
to send an HTML response to a client.</li>
</ul>
<hr>
<h1 class="mume-header" id="digging-into-the-pug-template-syntax">Digging Into the Pug Template Syntax</h1>

<p>Now that you&apos;ve seen how to create and render a simple Pug template, let&apos;s<br>
explore Pug&apos;s syntax in more depth. Learning Pug&apos;s syntax takes time and effort,<br>
but the payoff is that writing and maintaining templates will generally take<br>
less time overall.</p>
<p>When you finish this article, you should be able to use the Pug template syntax<br>
to:</p>
<ul>
<li>Render elements;</li>
<li>Set element attribute values;</li>
<li>Set element class and ID attribute values;</li>
<li>Set element content from a variable;</li>
<li>Set an element attribute value from a variable;</li>
<li>Inject a variable value into text using interpolation;</li>
<li>Iterate the elements in an array to generate content; and</li>
<li>Conditionally display content.</li>
</ul>
<h2 class="mume-header" id="setting-up-a-sandbox-application">Setting up a sandbox application</h2>

<blockquote>
<p><strong>Exercise your brain!</strong> Use the following application as a sandbox to test<br>
and experiment with the Pug syntax as it&apos;s introduced in this article. Doing<br>
this will help you to remember what you&apos;ve learned.</p>
</blockquote>
<p>Create a folder for your project, open a terminal or command prompt window,<br>
browse to your project&apos;s folder, and initialize npm:</p>
<pre data-role="codeBlock" data-info class="language-"><code>npm init -y
</code></pre><p>Then install Express 4.0 and Pug 2:</p>
<pre data-role="codeBlock" data-info class="language-"><code>npm install express@^4.0.0 pug@^2.0.0
</code></pre><p>Add a folder named <code>views</code> to your project, then add a file named <code>layout.pug</code><br>
containing the following code:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">html</span>
  <span class="token tag">head</span>
    <span class="token tag">title</span><span class="token punctuation">=</span><span class="token code"> title</span>
  <span class="token tag">body</span>
    <span class="token tag">h1</span><span class="token punctuation">=</span><span class="token code"> heading</span>
</pre><p>Then add a file named <code>app.js</code> to your project folder containing the following<br>
code:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set the pug view engine.</span>
app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&apos;view engine&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;pug&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define a route.</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&apos;*&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request path: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&apos;layout&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">&apos;Pug Template Syntax Sandbox&apos;</span><span class="token punctuation">,</span> heading<span class="token punctuation">:</span> <span class="token string">&apos;Welcome to the Sandbox!&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define a port and start listening for connections.</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>To test your application, open a terminal or command prompt window, browse to<br>
your project&apos;s folder, and run the command:</p>
<pre data-role="codeBlock" data-info class="language-"><code>node app.js
</code></pre><p>The text &quot;Listening on port 8081&#x2026;&quot; should display in the terminal or command<br>
prompt window. Open a web browser and browse to the address<br>
<code>http://localhost:8081/</code> to confirm that the application sends a response that<br>
displays an HTML <code>&lt;h1&gt;</code> element containing the text &quot;Welcome to the Sandbox!&quot;.</p>
<h2 class="mume-header" id="rendering-elements">Rendering elements</h2>

<p>Consider the following excerpt from a Pug template:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">ul</span>
  <span class="token tag">li</span> <span class="token plain-text">Item A</span>
  <span class="token tag">li</span> <span class="token plain-text">Item B</span>
  <span class="token tag">li</span> <span class="token plain-text">Item C</span>
</pre><p>This renders an HTML unordered list:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</pre><p>Text at the beginning of a line (with or without white space) represents an HTML<br>
element. Any text included after the element name will be added as the element&apos;s<br>
inner text. To add an element as a child element, simply indent the line for the<br>
child element by one or more spaces (two spaces is a common convention).</p>
<blockquote>
<p>Whether you decide to use two or four spaces for indenting elements, it&apos;s<br>
important to keep your indentation consistent throughout the template. Not<br>
doing so might result in Pug throwing an error at runtime.</p>
</blockquote>
<h2 class="mume-header" id="setting-element-attribute-values">Setting element attribute values</h2>

<p>To set attribute values on an element, follow the element name with a pair of<br>
parentheses containing one or more attribute name/value pairs:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">a<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">href</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&apos;/about&apos;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&apos;menu-button&apos;</span></span><span class="token punctuation">)</span></span></span> <span class="token plain-text">About</span>
</pre><p>Renders to:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>menu-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</pre><h3 class="mume-header" id="setting-class-and-id-attribute-values">Setting <code>class</code> and <code>id</code> attribute values</h3>

<p>Element class and ID attributes are very common attributes to set, so Pug<br>
provides a shortcut syntax for each. You can set an element&apos;s <code>class</code> attribute<br>
using the syntax <code>.classname</code> and an element&apos;s <code>id</code> attribute using <code>#idname</code>:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">div#container</span>
  <span class="token tag">a.button</span> <span class="token plain-text">Cancel</span>
</pre><p>Renders to:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Cancel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</pre><p>You can also combine a class name with an ID name or chain multiple class names:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">div#container.main</span>
  <span class="token tag">a.button.large</span> <span class="token plain-text">Cancel</span>
</pre><p>Renders to:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button large<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Cancel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</pre><p>This example can be further condensed. <code>&lt;div&gt;</code> elements are so common, Pug<br>
allows you to remove the <code>&lt;div&gt;</code> element&apos;s name:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">#container.main</span>
  <span class="token tag">a.button.large</span> <span class="token plain-text">Cancel</span>
</pre><h2 class="mume-header" id="rendering-data">Rendering data</h2>

<p>As you saw in an earlier article, you can provide data to a template by passing<br>
an object to the <code>res.render()</code> method:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&apos;layout&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> firstName<span class="token punctuation">:</span> <span class="token string">&apos;Grace&apos;</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">&apos;Hopper&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Properties on the object passed as the second argument to the <code>res.render()</code><br>
method are defined within a template as local variables, which can be used to<br>
set element content:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">ul</span>
  <span class="token tag">li</span><span class="token punctuation">=</span><span class="token code"> firstName</span>
  <span class="token tag">li</span><span class="token punctuation">=</span><span class="token code"> lastName</span>
</pre><p>Which would render to:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Grace<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Hopper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</pre><p>Variables can also be used to set element attribute values:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">form</span>
  <span class="token tag">div</span>
    <span class="token tag">label</span> <span class="token plain-text">First Name:</span>
    <span class="token tag">input<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&apos;text&apos;</span> name<span class="token operator">=</span><span class="token string">&apos;firstName&apos;</span> value<span class="token operator">=</span>firstName</span><span class="token punctuation">)</span></span></span>
  <span class="token tag">div</span>
    <span class="token tag">label</span> <span class="token plain-text">Last Name:</span>
    <span class="token tag">input<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&apos;text&apos;</span> name<span class="token operator">=</span><span class="token string">&apos;lastName&apos;</span> value<span class="token operator">=</span>lastName</span><span class="token punctuation">)</span></span></span>
</pre><p>Renders to:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>First Name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>firstName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Grace<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Last Name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Hopper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</pre><p>You can also use interpolation to inject a variable value into text:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">p</span> <span class="token plain-text">Welcome #{firstName} #{lastName}!</span>
</pre><p>Renders to:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Welcome Grace Hopper!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</pre><blockquote>
<p>Notice how Pug&apos;s interpolation syntax <code>#{expression}</code> differs from<br>
JavaScript&apos;s string template literal interpolation syntax <code>${expression}</code>. In<br>
a Pug template, the text to the right of the element name is just plain text,<br>
not JavaScript.</p>
</blockquote>
<h2 class="mume-header" id="iteration-and-conditionals">Iteration and conditionals</h2>

<p>You can even use dynamic data to control the generation of HTML in your<br>
templates. Suppose you pass an array of colors to the <code>res.render()</code> method:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&apos;layout&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> colors<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;Red&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Green&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Blue&apos;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Using that array of values, you can generate an ordered list:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token tag">ul</span>
  <span class="token flow-control"><span class="token each"><span class="token keyword">each</span> color <span class="token keyword">in</span></span> colors</span>
    <span class="token tag">li</span><span class="token punctuation">=</span><span class="token code"> color</span>
</pre><p>Which renders as:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Red<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Green<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Blue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</pre><p>You can also conditionally display content. First, send a boolean value to the<br>
template that indicates if the current user is logged in or not:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&apos;layout&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> userIsLoggedIn<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Then you can use that boolean variable to determine what content to display:</p>
<pre data-role="codeBlock" data-info="pug" class="language-pug"><span class="token flow-control"><span class="token branch keyword">if</span> userIsLoggedIn</span>
  <span class="token tag">h2</span> <span class="token plain-text">Welcome!</span>
<span class="token flow-control"><span class="token branch keyword">else</span></span>
  <span class="token tag">a<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">href</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">&apos;/login&apos;</span></span><span class="token punctuation">)</span></span></span> <span class="token plain-text">Please login</span>
</pre><p>If the <code>userIsLoggedIn</code> variable is <code>true</code> (indicating that the user has logged<br>
in) then the template would render:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Welcome!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
</pre><p>Otherwise the template would render:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Please login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</pre><h2 class="mume-header" id="what-you-learned-2">What you learned</h2>

<p>In this article, you learned how to</p>
<ul>
<li>render elements;</li>
<li>set element attribute values;</li>
<li>set element class and ID attribute values;</li>
<li>set element content from a variable;</li>
<li>set an element attribute value from a variable;</li>
<li>inject a variable value into text using interpolation;</li>
<li>iterate the elements in an array to generate content; and</li>
<li>conditionally display content.</li>
</ul>
<h2 class="mume-header" id="see-also-1">See also&#x2026;</h2>

<p>There&apos;s so much more that you can do with Pug! Be sure to take some time to<br>
explore <a href="https://pugjs.org/api/getting-started.html">Pug&apos;s documentation</a>.</p>
<hr>
<h1 class="mume-header" id="exploring-route-paths">Exploring Route Paths</h1>

<p>You&apos;ve seen that defining route paths in Express using a string is easy to do:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/about&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;About&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/contact&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Contact&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/our-team&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Our Team&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>You can also easily include child paths:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/our-team/sf&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Our Team - San Francisco&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/our-team/nyc&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Our Team - New York City&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>But what if you need to match multiple paths for a single resource? Having to<br>
define a route using a string route path for each variation is time consuming<br>
and difficult to maintain. In some cases, it might be impossible to spell out<br>
every possible variation. For example, what if the variable part of the path<br>
represents the ID of a database record to retrieve? Luckily, Express provides a<br>
wealth of options for defining route paths that you can use to solve virtually<br>
any routing challenge.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Recall that route parameters are named URL segments used to capture values;</li>
<li>Define a route whose path contains one or more route parameters;</li>
<li>Recall that a route path can be a string, string pattern, regular expression,<br>
or an array containing any combination of those;</li>
<li>Define a route path using a string pattern; and</li>
<li>Define a route path using a regular expression.</li>
</ul>
<h2 class="mume-header" id="getting-data-from-a-path">Getting data from a path</h2>

<p>Imagine that you&apos;re developing a website for the Best Company Ever. As a<br>
starting point, your project&apos;s <code>app.js</code> file contains the following code:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TODO Define routes.</span>

<span class="token comment">// Define a port and start listening for connections.</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><blockquote>
<p>To follow along, be sure to initialize npm in your project folder (<code>npm init -y</code>) and install Express (<code>npm install express@^4.0.0</code>). Use <code>node app.js</code> to<br>
run the server. Remember that if you leave the server running in the terminal<br>
or command prompt window while you&apos;re working, you&apos;ll need to stop and restart<br>
it so that Node picks up your latest code changes. To do that, press <code>CTRL+C</code><br>
to stop the server and run <code>node app.js</code> again to restart the server.</p>
</blockquote>
<p>You need to define your application&apos;s first route for a &quot;Product&quot; page that<br>
displays information about a product from the Best Company Ever&apos;s catalog. The<br>
product to display is variable&#x2014;meaning that it depends on the product ID that&apos;s<br>
passed via the URL path:</p>
<ul>
<li><code>/product/1</code> - displays information for the product whose database ID is <code>1</code>;</li>
<li><code>/product/2</code> - displays information for the product whose database ID is <code>2</code>;</li>
<li>and so on.</li>
</ul>
<p>Your initial thought is to use a query string parameter for the product ID (e.g.<br>
<code>/product?id=1</code>) instead of including it in the path. But after a bit of<br>
research, you <a href="https://www.google.com/search?q=query+string+parameters+and+search+engine+results">decide against that approach for SEO (search engine optimization)<br>
reasons</a>.</p>
<p>Defining routes using string based route paths for the first two products gives<br>
you something like this:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/product/1&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Product ID: 1&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/product/2&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Product ID: 2&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>This works, but the Best Company Ever is very successful (of course they are&#x2026;<br>
they&apos;re the best company ever!) and they have over 1,000 products in their<br>
catalog. That means you have at least 998 routes left to define! Clearly, using<br>
string based route paths simply won&apos;t work. Also, you want to keep your code as<br>
DRY (don&apos;t repeat yourself!) as possible.</p>
<h3 class="mume-header" id="leveraging-route-parameters">Leveraging route parameters</h3>

<p>Express route parameters are specifically designed for this situation.</p>
<p>A path is divided into segments using forward slashes (<code>/</code>). For example, given<br>
the path <code>/locations/ca/search</code>, <code>locations</code>, <code>ca</code>, and <code>search</code> would all be<br>
segments. A route parameter is a named path segment that captures the value at<br>
that position in the path. The captured value is available within a route<br>
handler function via the <code>req.params</code> object.</p>
<p>Here&apos;s the &quot;Product&quot; page route defined using an <code>id</code> route parameter:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/product/:id&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Product ID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Using this route definition, the following request URL paths all match:</p>
<ul>
<li><code>/product/1</code> - displays &quot;Product ID: 1&quot;</li>
<li><code>/product/2</code> - displays &quot;Product ID: 2&quot;</li>
<li><code>/product/asdf</code> - displays &quot;Product ID: asdf&quot;</li>
</ul>
<p>That&apos;s progress! But unfortunately, while <code>1</code> and <code>2</code> are valid product IDs, the<br>
string <code>asdf</code> is not.</p>
<h3 class="mume-header" id="restricting-route-parameter-matches">Restricting route parameter matches</h3>

<p>By default, a route parameter will match almost any character (exceptions<br>
include a question mark <code>?</code> which denotes the beginning of the query string and<br>
a slash <code>/</code> which marks the beginning of the next path segment). Given that,<br>
<code>1</code>, <code>2</code>, and <code>asdf</code> are all valid values.</p>
<p>You can use a regular expression to exert more control over which values will<br>
match. Regular expressions use a language agnostic syntax for matching string<br>
patterns. For example, a dot <code>.</code> represents any character in a regular<br>
expression, so the expression <code>c.t</code> can match <code>cat</code>, <code>cot</code>, or <code>cut</code>, but not<br>
<code>can</code> nor <code>bat</code>.</p>
<p>There are many other special characters that you can use to match specific<br>
string patterns:</p>
<ul>
<li>the special character <code>\d</code> matches a single digit (i.e. <code>0</code> through <code>9</code>); and</li>
<li>adding a plus sign <code>\d+</code> matches one or more digits.</li>
</ul>
<p>To apply a regular expression to a route parameter, place it in parentheses just<br>
after the route parameter name:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/product/:id(\\d+)&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Product ID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Now the route will only match URL paths that have a number in the route<br>
parameter&apos;s position:</p>
<ul>
<li><code>/product/1</code> - displays &quot;Product ID: 1&quot;</li>
<li><code>/product/2</code> - displays &quot;Product ID: 2&quot;</li>
<li><code>/product/asdf</code> - displays &quot;Cannot GET /product/asdf&quot; (404 Not Found)</li>
</ul>
<blockquote>
<p>The regular expression has an extra backslash <code>\</code> in the route path before<br>
<code>\d+</code> because the backslash character is used to escape special characters<br>
within a JavaScript string literal. For more information see the &quot;Escape<br>
notation&quot; section on the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">MDN Web Docs <code>String</code> page</a>.</p>
</blockquote>
<p>Now the route parameter only matches a numeric value in the URL path but the<br>
value via the <code>req.params</code> object is still a string. If you need the route<br>
parameter value as a number, you&apos;ll need to convert it:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/product/:id(\\d+)&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> productId <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Product ID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>productId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><blockquote>
<p>For more information on the <code>parseInt()</code> function, see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt">this page on MDN Web<br>
Docs</a>.</p>
</blockquote>
<h2 class="mume-header" id="defining-flexible-route-paths">Defining flexible route paths</h2>

<p>As you develop websites and web applications, you&apos;ll likely find that using a<br>
combination of strings and route parameters to define your routes will cover the<br>
majority of your use cases. Sometimes though, situations will come up that will<br>
require a different approach.</p>
<p>Your next task for the Best Company Ever website is to define a route for their<br>
&quot;Products&quot; page. After spending some time with the internal stakeholders for the<br>
project from the Sales, Marketing, and Customer Support departments, you&apos;ve<br>
determined that the following use cases and issues all need to be addressed:</p>
<ul>
<li>Marketing somehow managed to design and publish advertisements using both<br>
<code>www.bestcompanyever.com/products</code> and <code>www.bestcompanyever.com/our-products</code><br>
as the URLs for the same &quot;Products&quot; page.</li>
<li>Customer Support has noticed that sometimes customers forget the &quot;s&quot; at the<br>
end of &quot;products&quot; and get frustrated when they get a &quot;Page Not Found&quot; error<br>
trying to browse to the URL <code>www.bestcompanyever.com/product</code>.</li>
<li>Customer Support has also noticed that sometimes customers mistype the word<br>
&quot;products&quot; as &quot;prodcts&quot; or &quot;productts&quot;.</li>
<li>Sales would like to allow customers to use &quot;productos&quot; (Spanish for<br>
&quot;products&quot;) to make it as easy as possible for everyone to find the &quot;Products&quot;<br>
page.</li>
</ul>
<p>All of this translates into mapping the following paths to the &quot;Products&quot; page:</p>
<ul>
<li><code>/products</code></li>
<li><code>/our-products</code></li>
<li><code>/product</code></li>
<li><code>/prodcts</code></li>
<li><code>/productts</code></li>
<li><code>/productos</code></li>
</ul>
<p>Having to define a route for each of these paths would be less than ideal.<br>
Luckily, Express provides a number of options for defining route paths including<br>
using</p>
<ul>
<li>a string (this is what you&apos;ve been using up to this point);</li>
<li>a string pattern;</li>
<li>a regular expression; or</li>
<li>an array containing any combination of those.</li>
</ul>
<p>Let&apos;s use these options to develop a solution!</p>
<h3 class="mume-header" id="using-a-string-pattern">Using a string pattern</h3>

<p>Your first attempt at defining the route for the &quot;Products&quot; page looks like<br>
this:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/products&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Currently, when running the application (<code>node app.js</code>) the only URL that<br>
returns the string &quot;Products&quot; is <code>http://localhost:8081/products</code> (i.e. the path<br>
<code>/products</code>). This makes sense, as our route&apos;s path is defined using the string<br>
<code>/products</code>.</p>
<p>You can use a string pattern to define a route path that will match more<br>
incoming request URL paths. The following characters, when used within a string<br>
based route path, behave somewhat like their regular expression counterparts:</p>
<ul>
<li>question mark <code>?</code> - specifies that the previous character can appear zero to<br>
one time</li>
<li>plus sign <code>+</code> - specifies that the previous character can appear one or more<br>
times</li>
<li>asterisk <code>*</code> - matches any number of characters (i.e. &quot;wildcard&quot; character)</li>
</ul>
<p>Looking at your route again, adding a question mark <code>?</code> after the <code>s</code> in the<br>
path <code>/products</code> specifies that the <code>s</code> can appear zero to one time:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/products?&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Now your route will match the URL paths <code>/products</code> and <code>/product</code>.</p>
<p>After reviewing the list of paths that you need to match, you notice that you<br>
can add an additional question mark <code>?</code> after the <code>u</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/produ?cts?&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Now both the <code>u</code> and the <code>s</code> are effectively optional, allowing the following<br>
URL paths to match:</p>
<ul>
<li><code>/products</code></li>
<li><code>/product</code></li>
<li><code>/prodcts</code></li>
</ul>
<p>Taking it a step further, you add a plus sign <code>+</code> after the <code>t</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/produ?ct+s?&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>That change allows one or more <code>t</code>s to appear in the URL path, allowing the<br>
following URL paths to match:</p>
<ul>
<li><code>/products</code></li>
<li><code>/product</code></li>
<li><code>/prodcts</code></li>
<li><code>/productts</code></li>
</ul>
<p>And now for the master stroke: you add an asterisk <code>*</code> in between the <code>/</code> and<br>
<code>p</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/*produ?ct+s?&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Now all of the following URL paths match:</p>
<ul>
<li><code>/products</code></li>
<li><code>/product</code></li>
<li><code>/prodcts</code></li>
<li><code>/productts</code></li>
<li><code>/our-products</code></li>
</ul>
<p>Using string patterns to define route paths are useful but fairly limited in<br>
capability. For example, our string pattern based route path has the following<br>
deficiencies:</p>
<ul>
<li>The asterisk <code>*</code> matches the URL path <code>/our-products</code> but also literally<br>
anything else between the <code>/</code> and <code>p</code>, including <code>/cool-products</code>,<br>
<code>asdf-products</code>, and so on.</li>
<li>The plus sign <code>+</code> after the <code>t</code> matches <code>tt</code> but also <code>ttt</code>, <code>tttt</code>, and so<br>
on.</li>
</ul>
<p>Depending on your specific situation, these shortcomings might be something you<br>
can live with. If you can&apos;t, you can write a more sophisticated route path using<br>
a regular expression.</p>
<h3 class="mume-header" id="using-a-regular-expression">Using a regular expression</h3>

<p>When defining a route, Express allows you to define your route path using a<br>
regular expression. You can rewrite your original &quot;Products&quot; page route using a<br>
regular expression like this:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token regex">/^\/products\/?$/i</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>At this point, only the URL path <code>/products</code> will match.</p>
<p>Regular expressions can be difficult to read and understand. Here&apos;s a<br>
step-by-step breakdown, from left to right, of the above regular expression<br>
(don&apos;t worry about committing all of this regular expression syntax to memory;<br>
you&apos;ll have access to documentation when designing complex regular expression<br>
based routes):</p>
<ul>
<li><code>/</code> - Denotes the beginning of the regular expression.</li>
<li><code>^</code> - Indicates that the expression must match the beginning of the URL path<br>
string.</li>
<li><code>\/</code> - Matches a forward slash <code>/</code>. Because forward slashes have special<br>
meaning (they mark the beginning and ending of a regular expression) they must<br>
be escaped with a backslash <code>\</code>.</li>
<li><code>products</code> - Matches the literal string <code>products</code>.</li>
<li><code>\/?</code> - Matches zero or one instance of a forward slash <code>/</code>.
<ul>
<li>Since you&apos;re using the <code>^</code> and <code>$</code> characters to match the beginning and<br>
ending of the URL path string, you need to add an optional forward slash at<br>
the end of the expression in order to allow for URL paths that have a<br>
trailing forward slash.</li>
</ul>
</li>
<li><code>$</code> - Indicates that the expression must match the ending of the URL path<br>
string.</li>
<li><code>/</code> - Denotes the ending of the regular expression.</li>
<li><code>i</code> - Indicates that the regular expression is case-insensitive.</li>
</ul>
<blockquote>
<p>We&apos;re just scratching the surface of what&apos;s possible with regular expressions.<br>
For more information about regular expressions, see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">this page on MDN Web<br>
Docs</a>.</p>
</blockquote>
<p>Now let&apos;s work on extending the regular expression to match more URL paths.</p>
<p>Since the question mark <code>?</code> character behaves like it does within a string<br>
pattern, you can make the <code>u</code> and the <code>s</code> in <code>products</code> optional like you did<br>
before:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token regex">/^\/produ?cts?\/?$/i</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>This allows the following URL paths to match:</p>
<ul>
<li><code>/products</code></li>
<li><code>/product</code></li>
<li><code>/prodcts</code></li>
</ul>
<p>Instead of using the plus sign <code>+</code> after the <code>t</code> to allow one or more <code>t</code>s to<br>
appear in the URL path, you can use a set of curly braces <code>{}</code> to specify the<br>
minimum and maximum number of instances:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token regex">/^\/produ?ct{1,2}s?\/?$/i</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Now the following URL paths will match:</p>
<ul>
<li><code>/products</code></li>
<li><code>/product</code></li>
<li><code>/prodcts</code></li>
<li><code>/productts</code> (but not <code>/producttts</code>, <code>/productttts</code>, or so on)</li>
</ul>
<p>To match on the URL path <code>/our-products</code>, you can use a set of parentheses <code>()</code><br>
to define a capture group containing the string <code>our-</code> and follow the capture<br>
group with a question mark <code>?</code> to make it optional:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token regex">/^\/(our-)?produ?ct{1,2}s?\/?$/i</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><blockquote>
<p>Capture groups are a powerful tool when writing regular expressions. In this<br>
example, you&apos;re simply using a capture group as a way to group the characters<br>
<code>our-</code> together so that the question mark <code>?</code> that follows the group will<br>
apply to the group as if it were a single character.</p>
</blockquote>
<p>Going one step further, you can add another capture group by wrapping<br>
<code>(our-)?produ?ct{1,2}s?</code> in another set of parentheses. Then, within the new<br>
capture group, append the text <code>|productos</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token regex">/^\/((our-)?produ?ct{1,2}s?|productos)\/?$/i</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>The pipe character <code>|</code> is used to create a logical &quot;OR&quot; expression (i.e. &quot;this&quot;<br>
or &quot;that&quot;). Adding the pipe <code>|</code> within the new group specifies that the<br>
expression <code>(our-)?produ?ct{1,2}s?</code> or <code>productos</code> should match.</p>
<p>With this change in place, the following URL paths all match:</p>
<ul>
<li><code>/products</code></li>
<li><code>/product</code></li>
<li><code>/prodcts</code></li>
<li><code>/productts</code> (but not <code>/producttts</code>, <code>/productttts</code>, or so on)</li>
<li><code>/our-products</code></li>
<li><code>/productos</code></li>
</ul>
<blockquote>
<p><strong>Don&apos;t worry if you found this section difficult to understand.</strong> A lot of<br>
developers find regular expressions to be challenging to write, test, and<br>
debug. Unless your work requires you to write regular expressions on a<br>
frequent basis, it&apos;s likely that you&apos;ll need to spend time brushing up your<br>
regular expressions skills before you can successfully write or update an<br>
expression. Using a good tool can make a big difference&#x2014;ask your fellow<br>
developers what tool(s) they&apos;ve found to be helpful!</p>
</blockquote>
<h3 class="mume-header" id="using-an-array-of-paths">Using an array of paths</h3>

<p>In addition to the techniques you&apos;ve seen so far, you can also use an array of<br>
values for the route path:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token regex">/^\/(our-)?produ?ct{1,2}s?\/?$/i</span><span class="token punctuation">,</span> <span class="token string">&apos;/productos&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>When a route is defined using an array of values for the route path, Express<br>
will check each of the array&apos;s elements to determine if an incoming request URL<br>
path is a match.</p>
<p>Using an array allows you to simplify the regular expression a bit by pulling<br>
the <code>/productos</code> path out of the regular expression into its own route path<br>
string. This change has no effect on the outward functionality of your<br>
application; it&apos;s all about choosing the option that&apos;s easiest to read,<br>
understand, and maintain.</p>
<h2 class="mume-header" id="redirecting-incorrect-requests">Redirecting &quot;incorrect&quot; requests</h2>

<p>All of the internal stakeholders at the Best Company Ever love the new website.<br>
They&apos;re especially happy that you were able to address all of the URL path<br>
oddities surrounding the &quot;Products&quot; page.</p>
<p>There&apos;s one final issue to address though. A sharp-eyed tester noticed that when<br>
you request the &quot;Products&quot; page using one of the non-preferred paths (e.g.<br>
<code>/prodcts</code>) the page displays as expected, but the URL in the browser&apos;s address<br>
bar shows the non-preferred path (i.e.<br>
<code>http://www.bestcompanyever.com/prodcts</code>). Ideally, when a client requests the<br>
&quot;Products&quot; page using anything other than the preferred route of <code>/products</code>,<br>
they&apos;d be redirected back to the page using the preferred path.</p>
<p>You can accomplish this by updating the route handler to check if the current<br>
request&apos;s path (i.e. <code>req.path</code>) starts with the preferred path, and if not,<br>
uses the <code>res.redirect()</code> method to redirect the client:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// If the current request path doesn&apos;t match our preferred</span>
<span class="token comment">// route path then redirect the client.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>req<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&apos;/products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&apos;/products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>By default, Express routing isn&apos;t case-sensitive, so the request path<br>
<code>/Products</code> would match our preferred route path <code>/products</code>. To prevent from<br>
redirecting requests that only differ by casing, the string <code>toLowerCase()</code><br>
method is being used to force the request path to all lowercase. Also, Express<br>
allows incoming request paths that have an optional trailing forward slash<br>
(i.e. <code>/products/</code>) to match a route path without a trailing forward slash<br>
(i.e. <code>/products</code>). Using the string <code>startsWith()</code> method gives us an easy<br>
way to check for the preferred path without having to account for the trailing<br>
slash.</p>
</blockquote>
<p>After finishing all of the refactoring, the final version of your <code>app.js</code> file<br>
should now look like this:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define routes.</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/product/:id(\\d+)&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Product ID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token regex">/^\/(our-)?produ?ct{1,2}s?\/?$/i</span><span class="token punctuation">,</span> <span class="token string">&apos;/productos&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token comment">// If the current request path doesn&apos;t match our preferred</span>
 <span class="token comment">// route path then redirect the client.</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>req<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&apos;/products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&apos;/products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Products&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define a port and start listening for connections.</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h2 class="mume-header" id="what-you-learned-3">What you learned</h2>

<p>In this article, you learned</p>
<ul>
<li>that route parameters are named URL segments used to capture values;</li>
<li>how to define a route whose path contains one or more route parameters;</li>
<li>that a route path can be a string, string pattern, regular expression, or an<br>
array containing any combination of those;</li>
<li>how to define a route path using a string pattern; and</li>
<li>how to define a route path using a regular expression.</li>
</ul>
<hr>
<h1 class="mume-header" id="express-routers">Express Routers</h1>

<p>As you&apos;ve learned about Express routing, you&apos;ve defined routes within a single<br>
<code>app.js</code> file. While this is a convenient approach to use while learning, it&apos;s<br>
not very practical for &quot;real world&quot; web applications.</p>
<p>In the real world, web applications tend to target groups of resources, where<br>
each resource is associated with multiple routes. For example, a customer order<br>
management application might target resources like &quot;Customers&quot;, &quot;Products&quot;,<br>
&quot;Product Categories&quot;, and &quot;Orders&quot;, and each of those resources might have<br>
routes for creating, retrieving, updating, and deleting records (often referred<br>
to as CRUD operations). Additionally, some resources might need to share the<br>
same routes.</p>
<p>In these situations, defining all of your web application&apos;s routes within a<br>
single JavaScript file is simply put, a bad idea.</p>
<p>Express routers allow developers to create collections of modular, mountable<br>
route handlers. Using routers helps to keep your code organized and DRY (don&apos;t<br>
repeat yourself!), ensuring that your code is as readable and maintainable as<br>
possible.</p>
<p>As an introduction to Express routers, let&apos;s create routing for a sports team<br>
application. You&apos;ll use a router to define routes for &quot;Home&quot;, &quot;Schedule&quot;, and<br>
&quot;Roster&quot; pages. Then you&apos;ll see how to mount that router onto your application<br>
so that its routes are shared across multiple teams.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Use the <code>express.Router</code> class to define a collection of route handlers; and</li>
<li>Use the <code>app.use()</code> method to mount a Router instance for a specific route<br>
path.</li>
</ul>
<h2 class="mume-header" id="setting-up-the-initial-project">Setting up the initial project</h2>

<p>Create a folder for your project, open a terminal or command prompt window,<br>
browse to your project&apos;s folder, and initialize npm:</p>
<pre data-role="codeBlock" data-info class="language-"><code>npm init -y
</code></pre><p>Then install Express 4.0:</p>
<pre data-role="codeBlock" data-info class="language-"><code>npm install express@^4.0.0
</code></pre><p>Add a file named <code>app.js</code> file to your project containing the following code:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TODO Mount router instances.</span>

<span class="token comment">// Define a port and start listening for connections.</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Your application doesn&apos;t contain any routes yet, so hold off on testing for a<br>
bit.</p>
<blockquote>
<p>Remember that if you leave your application running in the terminal or command<br>
prompt window while you&apos;re working, you&apos;ll need to stop and restart it so that<br>
Node picks up your latest code changes. To do that, press <code>CTRL+C</code> to stop the<br>
application and run <code>node app.js</code> to restart the application.</p>
</blockquote>
<h2 class="mume-header" id="defining-a-collection-of-route-handlers">Defining a collection of route handlers</h2>

<p>While it&apos;s not required, a common convention is to create each Express router<br>
instance within its own Node module. Remember that in Node, each file is treated<br>
as a separate module. So, to create a new module for your router, add a new file<br>
named <code>routes.js</code> to your project.</p>
<blockquote>
<p>Typically, the name of the module reflects the resource that the router will<br>
be defining routes for. Going back to the customer order management<br>
application, you&apos;d have files named <code>customers.js</code> and <code>products.js</code><br>
containing routers (and route definitions) for the Customers and Products<br>
resources. For this article, you&apos;ll keep things simple and just use the<br>
filename <code>routes.js</code>.</p>
</blockquote>
<p>At the top of the file, use the <code>require</code> directive to import the <code>express</code><br>
module and assign it to a variable named <code>express</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>You&apos;ve had a lot of practice using the <code>express</code> function (exported by the<br>
<code>express</code> module) to create Express applications. The <code>express</code> module also<br>
exports the <code>Router</code> class via a property on the <code>express</code> function, which you<br>
can use to create an instance of a router:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Create the Router instance.</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Everything that you&apos;ve done so far with defining routes using an Express<br>
Application (<code>app</code>) object can be done with a router instance. For this reason,<br>
a router can be thought of as a &quot;mini-app&quot;.</p>
<blockquote>
<p>The Express Application (<code>app</code>) object and Router objects also handle<br>
middleware in the same way. You&apos;ll learn about middleware in a future lesson.</p>
</blockquote>
<p>Using the <code>router.get()</code> method, define a collection of routes for a sports team<br>
including &quot;Home&quot;, &quot;Schedule&quot;, and &quot;Roster&quot; pages:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Define routes.</span>

router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Home&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/schedule&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Schedule&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/roster&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Roster&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Code contained within a module isn&apos;t automatically visible or callable to code<br>
contained in other modules. To expose code to other modules, you can use the<br>
<code>module.exports</code> object. Since you only have one object to export from your<br>
module, simply assign the <code>router</code> variable to the <code>module.exports</code> property:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>
</pre><p>Here&apos;s the completed code for the <code>routes.js</code> file:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Router instance.</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define routes.</span>

router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Home&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/schedule&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Schedule&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/roster&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Roster&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>
</pre><h2 class="mume-header" id="mounting-a-router-instance">Mounting a Router instance</h2>

<p>Now that you&apos;ve finished setting up your router instance, you&apos;re ready to make<br>
use of it within your <code>app.js</code> file. At the top of the file just below where<br>
you&apos;re importing the <code>express</code> module, use the <code>require</code> directive to import the<br>
<code>routes</code> module and assign it to a variable named <code>routes</code>:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./routes&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><blockquote>
<p>Notice that the call to the <code>require</code> directive to import the <code>routes</code> module<br>
starts with a relative path (i.e. a dot <code>.</code> followed by a forward slash <code>/</code>).<br>
This tells Node that the <code>routes</code> module is a local module contained within<br>
our project, as opposed to a module contained within an external dependency<br>
located in the <code>node_modules</code> folder (that was installed using the <code>npm install</code> command).</p>
</blockquote>
<p>To expose your router instance to the outside world so that it can handle<br>
incoming HTTP requests, you need to tell your Express Application (<code>app</code>) object<br>
to use it. To do that, call the <code>app.use()</code> method passing in an optional route<br>
path along with the <code>routes</code> variable (the instance of your router):</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Mount router instances.</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;/portland-thorns&apos;</span><span class="token punctuation">,</span> routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Providing a route path when mounting your router instance allows you to mount<br>
the router instance multiple times each with a different route path:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Mount router instances.</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;/portland-thorns&apos;</span><span class="token punctuation">,</span> routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;/orlando-pride&apos;</span><span class="token punctuation">,</span> routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>The combination of the router mount paths and the route paths defined within the<br>
router allows you to easily and quickly build a hierarchy of routes:</p>
<ul>
<li><code>/portland-thorns/</code></li>
<li><code>/portland-thorns/schedule</code></li>
<li><code>/portland-thorns/roster</code></li>
<li><code>/orlando-pride/</code></li>
<li><code>/orlando-pride/schedule</code></li>
<li><code>/orlando-pride/roster</code></li>
</ul>
<p>If you mounted the router instance without supplying a route path (i.e.<br>
<code>app.use(routes)</code>), then your application would only have the following routes<br>
configured:</p>
<ul>
<li><code>/</code></li>
<li><code>/schedule</code></li>
<li><code>/roster</code></li>
</ul>
<blockquote>
<p>Mounting a router instance without a route path might not seem very useful at<br>
first glance, but it can be helpful technique for keeping your project<br>
organized by defining top-level routes in their own module using a router.</p>
</blockquote>
<p>The completed code for your <code>app.js</code> file should look like this:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./routes&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the Express app.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Mount router instances.</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;/portland-thorns&apos;</span><span class="token punctuation">,</span> routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;/orlando-pride&apos;</span><span class="token punctuation">,</span> routes<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define a port and start listening for connections.</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h3 class="mume-header" id="testing-the-application">Testing the application</h3>

<p>To test your application, open a terminal or command prompt window, browse to<br>
your project&apos;s folder, and run the following command:</p>
<pre data-role="codeBlock" data-info class="language-"><code>node app.js
</code></pre><p>If your application starts successfully, you&apos;ll see the text &quot;Listening on port<br>
8081&#x2026;&quot; displayed in the terminal or command prompt window. Next, open a web<br>
browser and browse to each of the following addresses for the Portland Thorns:</p>
<ul>
<li><code>http://localhost:8081/portland-thorns</code> - displays the text &quot;Home&quot; in the<br>
browser.</li>
<li><code>http://localhost:8081/portland-thorns/schedule</code> - displays the text<br>
&quot;Schedule&quot; in the browser.</li>
<li><code>http://localhost:8081/portland-thorns/roster</code> - displays the text &quot;Roster&quot; in<br>
the browser.</li>
</ul>
<p>Now browse to the following addresses for the Orlando Pride:</p>
<ul>
<li><code>http://localhost:8081/orlando-pride</code> - displays the text &quot;Home&quot; in the<br>
browser.</li>
<li><code>http://localhost:8081/orlando-pride/schedule</code> - displays the text &quot;Schedule&quot;<br>
in the browser.</li>
<li><code>http://localhost:8081/orlando-pride/roster</code> - displays the text &quot;Roster&quot; in<br>
the browser.</li>
</ul>
<p>Congrats on creating your first Express application with routers!</p>
<h2 class="mume-header" id="what-you-learned-4">What you learned</h2>

<p>In this article, you learned</p>
<ul>
<li>how to use the <code>express.Router</code> class to define a collection of route<br>
handlers; and</li>
<li>how to use the <code>app.use()</code> method to mount a Router instance for a specific<br>
route path.</li>
</ul>
<h2 class="mume-header" id="see-also-2">See also&#x2026;</h2>

<p>For more information about the Express Router class, <a href="https://expressjs.com/en/4x/api.html#router">see the official<br>
documentation</a>.</p>
<hr>
<h1 class="mume-header" id="routing-roundup-project">Routing Roundup Project</h1>

<p>Now that you&apos;ve learned about routing in Express, it&apos;s time to create an<br>
application to apply your knowledge! In this project, you&apos;ll:</p>
<ul>
<li>Create a web application using Express;</li>
<li>Use Express to send an HTTP response containing plain text;</li>
<li>Use Express to send an HTTP response containing HTML rendered from a Pug<br>
template;</li>
<li>Define route paths using a string, string pattern, or regular expression;</li>
<li>Define a route path containing a route parameter; and</li>
<li>Use an Express router to define a collection of route handlers.</li>
</ul>
<h2 class="mume-header" id="getting-started">Getting started</h2>

<ul>
<li>Clone the repository from<br>
<a href="https://github.com/appacademy-starters/routing-roundup-starter">https://github.com/appacademy-starters/routing-roundup-starter</a></li>
<li>Run <code>npm install</code> to install the dependencies</li>
<li>When you want to run tests, run <code>npm test</code></li>
</ul>
<h2 class="mume-header" id="phase-1-defining-the-default-route">Phase 1: Defining the default route</h2>

<p>To get started, install Express 4.x using <code>npm</code>.</p>
<p>Now you&apos;re ready to create your Express application. Add a file named <code>app.js</code><br>
to your project. For your first route, the application should return the plain<br>
text response &quot;Hello from Express!&quot; for <code>GET</code> requests to the default or root<br>
resource. Configure your application to listen for HTTP connections on port<br>
<code>8081</code>.</p>
<p>If you would like to, setup <code>nodemon</code> as a dev dependency so you don&apos;t have to<br>
restart your server when you make code changes.</p>
<p>To manually test your application, use Node to start your application. Open up a<br>
browser and browse to the URL <code>http://localhost:8081/</code>. You should see the plain<br>
text &quot;Hello from Express!&quot; displayed.</p>
<p>We&apos;ve also provided automated integration tests that you can use to test your<br>
application.  With your application started and listening for HTTP connections<br>
on port <code>8081</code>, run the command <code>npm test</code> from a terminal. (You will need <em>two</em><br>
terminals open to do this, one to run the app and one to run the tests.)</p>
<p>The tests will confirm that each of your application&apos;s routes return the<br>
expected HTTP responses. Initially, most of the tests will fail as you haven&apos;t<br>
implemented all of the expected routes yet. As you work your way through the<br>
project, more tests will start to pass. If you have any trouble with using the<br>
tests don&apos;t hesitate to ask a TA for help!</p>
<h2 class="mume-header" id="phase-2-using-a-template-to-render-html">Phase 2: Using a template to render HTML</h2>

<p>For your next route, you&apos;ll use Express to send an HTTP response containing HTML<br>
rendered from a Pug template.</p>
<p>Start with creating a Pug template with three variables for the request method,<br>
the request path, and a random number. Render the variable values using an<br>
unordered list:</p>
<pre data-role="codeBlock" data-info="html" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>[method]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>[path]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>[random number]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</pre><p>Replace the <code>[method]</code>, <code>[path]</code>, and <code>[random number]</code> text with the respective<br>
variable values.</p>
<p>After you complete your template, install Pug 2 and configure Express to use it<br>
as its default view engine. Then define a route that will match any request,<br>
regardless of the HTTP method, to a top level resource (such as <code>/about</code> or<br>
<code>/foo</code>). Use Express to render your template passing in the request method, the<br>
request path, and a random number. For the request method and path, remember<br>
that a route handler function&apos;s <code>req</code> parameter references the Express Request<br>
object which provides detail about the client request that&apos;s currently being<br>
processed. For the random number, use a whole number (no fractional or decimal<br>
part) greater than or equal to zero.</p>
<blockquote>
<p>Note: there are multiple ways to define a route path that&apos;ll match any request<br>
for a top level resource. Experiment a bit and use the approach that feels the<br>
easiest to implement. Think carefully about the order of your route<br>
definitions to ensure that you don&apos;t prevent other routes from being able to<br>
match their intended requests.</p>
</blockquote>
<blockquote>
<p>Additional note: remember that you can use the <code>console.log()</code> method to<br>
output the <code>req</code> parameter to the console as a way to inspect the properties<br>
that are available on the Request object. You can also use the <a href="https://expressjs.com/en/4x/api.html#req">official<br>
Express documentation</a> to research the available<br>
properties.</p>
</blockquote>
<p>To manually test your application, use Node to start your application, open up a<br>
browser, and browse to the URL <code>http://localhost:8081/about</code>. You should see the<br>
request method (<code>GET</code>), the request path (<code>/about</code>), and a random number<br>
displayed in an HTML unordered list.</p>
<p>To test your application using the provided automated integration tests, start<br>
your application listening for HTTP connections on port <code>8081</code> and run the<br>
command <code>mocha</code> from a terminal. You should see an additional set of tests pass<br>
that were previously failing.</p>
<h2 class="mume-header" id="phase-3-defining-another-flexible-route">Phase 3: Defining another flexible route</h2>

<p>For this route, you&apos;ll use Express to define a route that&apos;ll match any <code>GET</code><br>
request whose path ends with the letters &quot;xyz&quot;. The route should return the<br>
plain text response &quot;That&apos;s all I wrote.&quot;</p>
<blockquote>
<p>Note: there are multiple ways to define a route path that&apos;ll match any request<br>
whose path ends with a specific set of characters. Experiment a bit and use<br>
the approach that feels the easiest to implement. Again, think carefully about<br>
the order of your route definitions to ensure that all of your application&apos;s<br>
routes continue to work as intended.</p>
</blockquote>
<p>To manually test your application, use Node to start your application, open up a<br>
browser, and browse to the URL <code>http://localhost:8081/xyz</code> or<br>
<code>http://localhost:8081/something-else-xyz</code>. You should see the plain text<br>
&quot;That&apos;s all I wrote.&quot; displayed.</p>
<p>To test your application using the provided automated integration tests, start<br>
your application listening for HTTP connections on port <code>8081</code> and run the<br>
command <code>mocha</code> from a terminal. Same as before, you should see an additional<br>
set of tests pass that were previously failing.</p>
<h2 class="mume-header" id="phase-4-capturing-a-value-from-the-url-path">Phase 4: Capturing a value from the URL path</h2>

<p>Next, you&apos;ll use Express to define a route that&apos;ll match any <code>GET</code> request whose<br>
path starts with the path <code>/capital-letters/</code>. The route should return a plain<br>
text response of the uppercase version of the text in the path that follows<br>
<code>/capital-letters/</code>. For example, a request URL path of<br>
<code>/capital-letters/little</code> would return the plain text response &quot;LITTLE&quot;.</p>
<p>To complete this part of the project, think about how to define a route whose<br>
path contains a named path segment that captures the value at that position in<br>
the path. For more information, review the &quot;Exploring Route Paths&quot; article in<br>
this lesson to help you arrive at a solution.</p>
<p>To manually test your application, start your application, open up a browser,<br>
and browse to the URL <code>http://localhost:8081/capital-letters/express</code>. You<br>
should see the plain text &quot;EXPRESS&quot; displayed.</p>
<p>To test your application using the provided automated integration tests, start<br>
your application and run the command <code>mocha</code> from a terminal. You should see an<br>
additional set of tests pass that were previously failing.</p>
<h2 class="mume-header" id="phase-5-defining-a-collection-of-route-handlers">Phase 5: Defining a collection of route handlers</h2>

<p>To complete your project, you&apos;ll use an Express router to define a collection of<br>
route handlers. One of those route handlers should respond to the URL path<br>
<code>/bio</code> with the plain text &quot;Bio&quot; and another should response to <code>/contact</code> with<br>
the plain text &quot;Contact&quot;.</p>
<p>Once you&apos;ve defined your router, mount two instances to your application so<br>
that:</p>
<ul>
<li>
<p>A request with the URL path <code>/margot/bio</code> will return the plain text response<br>
&quot;Bio&quot; and <code>/margot/contact</code> will return the plain text response &quot;Contact&quot;; and</p>
</li>
<li>
<p>A request with the URL path <code>/margeaux/bio</code> will return the plain text<br>
response &quot;Bio&quot; and <code>/margeaux/contact</code> will return the plain text response<br>
&quot;Contact&quot;.</p>
</li>
</ul>
<p>To manually test your application, start your application, open up a browser,<br>
and browse to the URLs <code>http://localhost:8081/margot/bio</code>,<br>
<code>http://localhost:8081/margot/contact</code>, <code>http://localhost:8081/margeaux/bio</code>,<br>
and <code>http://localhost:8081/margeaux/contact</code>, and check that the application<br>
returns the expected responses.</p>
<p>To test your application using the provided automated integration tests, start<br>
your application and run the command <code>mocha</code> from a terminal. Now you should see<br>
all of the tests pass!</p>
<h2 class="mume-header" id="what-weve-learned">What We&apos;ve Learned</h2>

<p>Your Express routing application is now complete! Great job building out your<br>
application&apos;s routes using a variety of techniques.</p>
<p>In this project, you:</p>
<ul>
<li>Created a web application using Express;</li>
<li>used Express to send an HTTP response containing plain text;</li>
<li>used Express to send an HTTP response containing HTML rendered from a Pug<br>
template;</li>
<li>defined route paths using a string, string pattern, or regular expression;</li>
<li>defined a route path containing a route parameter; and</li>
<li>used an Express router to define a collection of route handlers.</li>
</ul>

      </div>
      <div class="md-sidebar-toc"><ul>
<li><a href="#express-learning-objectives">Express Learning Objectives</a></li>
<li><a href="#pug-template-learning-objectives">Pug Template Learning Objectives</a></li>
<li><a href="#moving-into-the-express-lane">Moving Into the Express Lane</a>
<ul>
<li><a href="#installing-express">Installing Express</a>
<ul>
<li><a href="#git-and-the-node_modules-folder">Git and the <code>node_modules</code> folder</a></li>
</ul>
</li>
<li><a href="#creating-an-express-application">Creating an Express application</a></li>
<li><a href="#handling-requests">Handling requests</a></li>
<li><a href="#listening-for-http-connections">Listening for HTTP connections</a></li>
<li><a href="#testing-your-application">Testing your application</a></li>
<li><a href="#what-you-learned">What you learned</a></li>
<li><a href="#see-also">See also&#x2026;</a></li>
</ul>
</li>
<li><a href="#templating-meet-pug">Templating - <em>Meet Pug!</em></a>
<ul>
<li><a href="#what-is-a-template">What is a template?</a></li>
<li><a href="#rendering-a-simple-template">Rendering a simple template</a>
<ul>
<li><a href="#setting-up-the-project">Setting up the project</a></li>
<li><a href="#creating-a-template">Creating a template</a></li>
<li><a href="#configuring-express-to-use-a-template-engine">Configuring Express to use a template engine</a></li>
<li><a href="#rendering-a-template">Rendering a template</a></li>
</ul>
</li>
<li><a href="#what-you-learned-1">What you learned</a></li>
</ul>
</li>
<li><a href="#digging-into-the-pug-template-syntax">Digging Into the Pug Template Syntax</a>
<ul>
<li><a href="#setting-up-a-sandbox-application">Setting up a sandbox application</a></li>
<li><a href="#rendering-elements">Rendering elements</a></li>
<li><a href="#setting-element-attribute-values">Setting element attribute values</a>
<ul>
<li><a href="#setting-class-and-id-attribute-values">Setting <code>class</code> and <code>id</code> attribute values</a></li>
</ul>
</li>
<li><a href="#rendering-data">Rendering data</a></li>
<li><a href="#iteration-and-conditionals">Iteration and conditionals</a></li>
<li><a href="#what-you-learned-2">What you learned</a></li>
<li><a href="#see-also-1">See also&#x2026;</a></li>
</ul>
</li>
<li><a href="#exploring-route-paths">Exploring Route Paths</a>
<ul>
<li><a href="#getting-data-from-a-path">Getting data from a path</a>
<ul>
<li><a href="#leveraging-route-parameters">Leveraging route parameters</a></li>
<li><a href="#restricting-route-parameter-matches">Restricting route parameter matches</a></li>
</ul>
</li>
<li><a href="#defining-flexible-route-paths">Defining flexible route paths</a>
<ul>
<li><a href="#using-a-string-pattern">Using a string pattern</a></li>
<li><a href="#using-a-regular-expression">Using a regular expression</a></li>
<li><a href="#using-an-array-of-paths">Using an array of paths</a></li>
</ul>
</li>
<li><a href="#redirecting-incorrect-requests">Redirecting &quot;incorrect&quot; requests</a></li>
<li><a href="#what-you-learned-3">What you learned</a></li>
</ul>
</li>
<li><a href="#express-routers">Express Routers</a>
<ul>
<li><a href="#setting-up-the-initial-project">Setting up the initial project</a></li>
<li><a href="#defining-a-collection-of-route-handlers">Defining a collection of route handlers</a></li>
<li><a href="#mounting-a-router-instance">Mounting a Router instance</a>
<ul>
<li><a href="#testing-the-application">Testing the application</a></li>
</ul>
</li>
<li><a href="#what-you-learned-4">What you learned</a></li>
<li><a href="#see-also-2">See also&#x2026;</a></li>
</ul>
</li>
<li><a href="#routing-roundup-project">Routing Roundup Project</a>
<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#phase-1-defining-the-default-route">Phase 1: Defining the default route</a></li>
<li><a href="#phase-2-using-a-template-to-render-html">Phase 2: Using a template to render HTML</a></li>
<li><a href="#phase-3-defining-another-flexible-route">Phase 3: Defining another flexible route</a></li>
<li><a href="#phase-4-capturing-a-value-from-the-url-path">Phase 4: Capturing a value from the URL path</a></li>
<li><a href="#phase-5-defining-a-collection-of-route-handlers">Phase 5: Defining a collection of route handlers</a></li>
<li><a href="#what-weve-learned">What We&apos;ve Learned</a></li>
</ul>
</li>
</ul>
</div>
      <a id="sidebar-toc-btn">&#x2261;</a>
    
    
    
    
    
    
    
    
<script>

var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>
      
  
    </body></html>