<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<html>

<head>
      <title>AJAX</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <link rel="stylesheet" href="file:///c:\Users\bryan\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.5.13\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">



  <link rel="stylesheet"
    href="file:///c:\Users\bryan\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.5.13\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">

  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap.grid.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap.css.map">
  <link rel="stylesheet" href="./../../css/blog-home.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/prism.css">
  <script async defer src="./../../vendor/bootstrap/css/prism.js"></script>
  <script async defer src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.4.0/build/highlight.min.js"></script>
  <link rel="stylesheet"
    href="file:///c:\Users\bryan\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.5.13\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.4.0/build/styles/default.min.css">


  <link rel="stylesheet" href="./cheatsheets.css">






    </head>
<!--------------------------------------------------------------------------------------------------->
<!--------------------------------------------------------------------------------------------------->
<!--------------------------------------------------------------------------------------------------->
<!--------------------------------------------------------------------------------------------------->
<!--------------------------------------------------------------------------------------------------->


<!--------------------------------------------------------------------------------------------------->
<!--------------------------------------------------------------------------------------------------->
<!--------------------------------------------------------------------------------------------------->
<!--------------------------------------------------------------------------------------------------->
<!--------------------------------------------------------------------------------------------------->


    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="ajax">Ajax</h1>

<ul>
<li>Ajax is a group of different technologies that work together to allow a website to communicate with a server in the background without requiring the website to reload in order to display new changes.
<ul>
<li>when a change happens, the server is no longer responsible for updating the HTML and then sending the entire HTML document back</li>
<li>Instead, the server would send back data about the change, either in an XML or JSON format, and the website could then process that data and update the DOM accordingly</li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="javascript-is-the-engine-behind-ajax">JavaScript is the engine behind AJAX</h4>

<ul>
<li>When the data comes back from the server, JavaScript can also then be used to make the necessary updates to the DOM.</li>
</ul>
<h3 class="mume-header" id="xml">XML</h3>

<ul>
<li>The XML portion of this acronym is outdated. In the early days of AJAX, after successfully updating the book&apos;s status to &quot;Want To Read&quot;, the server would send back data in XML format, like so:</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript">  <span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>book<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token number">29633913</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>status<span class="token operator">&gt;</span>Want To Read<span class="token operator">&lt;</span><span class="token operator">/</span>status<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>book<span class="token operator">&gt;</span>
</pre><ul>
<li>Nowadays, XML has been largely replaced by JSON, and you will almost always be dealing with a JSON response from a server that might look like this:</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript">    <span class="token punctuation">{</span>
      <span class="token string">&quot;book&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;id&quot;</span><span class="token punctuation">:</span> <span class="token number">29633913</span><span class="token punctuation">,</span>
        <span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Want to Read&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="fetch">Fetch</h3>

<ul>
<li>
<p>API</p>
</li>
<li>
<p>At a high level, <strong>Fetch is used to make HTTP requests.</strong></p>
</li>
<li>
<p>It uses <strong>Promises</strong> to handle the asynchronous nature of HTTP requests and responses.</p>
<h4>GET Request</h4>
<ul>
<li>
<p><strong>Default request</strong></p>
</li>
<li>
<p>GET requests are used to retrieve information from the server</p>
</li>
<li>
<p>Here&apos;s what a GET request might look like using the Fetch API:</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript">  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;https://jservice.xyz/api/games&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;response: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data:&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h5>Arguments:</h5>
<ul>
<li> <code class="language-javascript">fetch</code>&apos;s first argument is the URL that you want to make a request to (the path to the resource you want to fetch)</li>
<li>The second argument is an optional  <code class="language-javascript">options</code> object</li>
</ul>
<h5>Invoking  <code class="language-javascript">fetch</code>:</h5>
<ul>
<li>Invoking  <code class="language-javascript">fetch</code> returns a Promise that resolves with a Fetch Response object.
<ul>
<li>This Response object represents the entire HTTP response, and it holds crucial information like  <code class="language-javascript">status</code> and  <code class="language-javascript">url</code>.</li>
</ul>
</li>
</ul>
<h5>Callbacks:</h5>
<ul>
<li>In the first callback, the body of the response is a <strong>ReadableStream</strong> (represents a readable stream of byte data).
<ul>
<li>the  <code class="language-javascript">.json()</code> method takes that stream and returns a promise that resolves with the result of parsing the body text as JSON</li>
<li>The  <code class="language-javascript">.json()</code> method is the equivalent of using  <code class="language-javascript">JSON.parse()</code> except that it works on a ReadableStream instead of just a string.</li>
</ul>
</li>
<li>In the second callback, you can now access the data found in the body of the response</li>
</ul>
</li>
</ul>
<h4>POST Request</h4>
<ul>
<li>POST requests are used to create data on the server.</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript">  <span class="token comment">// with promises/catch</span>
  <span class="token keyword">const</span> handleClick <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/name&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> res<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&apos;h1&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> data<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        err<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">errorJSON</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&apos;div&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> errorJSON<span class="token punctuation">.</span>message
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// with async/await</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&apos;/name&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// localhost: 3000/name</span>
    <span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">debugger</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&apos;h1&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> json<span class="token punctuation">.</span>error<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&apos;div&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> json<span class="token punctuation">.</span>name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&apos;button&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;click&apos;</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span>
</pre></li>
</ul>
<p>img src=&quot;<a class="btn" href="https://assets.aaonline.io/Module-Web/ajax/ajax.svg">https://assets.aaonline.io/Module-Web/ajax/ajax.svg</a>&quot; height=&quot;500&quot;/&gt;</p>
<ul>
<li>
<p>In this file, you&apos;ll be setting up event listeners and implementing AJAX requests using the Fetch API.</p>
</li>
<li>
<p>launch the server by running npm start, and then go to your browser and navigate to localhost:3000.</p>
</li>
</ul>

      </div>
      <div class="md-sidebar-toc"><ul>
<li><a class="btn" href="#ajax">Ajax</a><br>
- <a class="btn" href="#javascript-is-the-engine-behind-ajax">JavaScript is the engine behind AJAX</a>
<ul>
<li><a class="btn" href="#xml">XML</a></li>
<li><a class="btn" href="#fetch">Fetch</a></li>
</ul>
</li>
</ul>
</div>
      <a id="sidebar-toc-btn">&#x2261;</a>








<script async>

var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>


    </body></html>
